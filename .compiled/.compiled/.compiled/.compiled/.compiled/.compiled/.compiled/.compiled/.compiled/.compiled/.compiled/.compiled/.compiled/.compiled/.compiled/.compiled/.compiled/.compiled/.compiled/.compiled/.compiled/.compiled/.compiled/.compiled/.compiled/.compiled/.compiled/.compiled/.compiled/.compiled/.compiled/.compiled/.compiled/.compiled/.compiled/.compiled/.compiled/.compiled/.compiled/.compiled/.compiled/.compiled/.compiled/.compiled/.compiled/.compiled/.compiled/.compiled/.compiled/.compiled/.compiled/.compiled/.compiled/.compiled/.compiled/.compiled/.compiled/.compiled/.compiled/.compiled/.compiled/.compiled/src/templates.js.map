{"version":3,"sources":["../../src/templates.js"],"names":["Object","defineProperty","exports","value","_handlebars","require","_handlebars2","_interopRequireDefault","_fs","_fs2","_lodash","_lodash2","_helpers","_helpers2","_utils","_utils2","obj","__esModule","default","templates","transform","template","context","isString","compile","getTemplate","fname","Promise","resolve","reject","console","log","readFileP","then","data","toString","all","module"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;;AAIA,IAAIC,cAAcC,QAAQ,YAAR,CAAlB;;AAEA,IAAIC,eAAeC,uBAAuBH,WAAvB,CAAnB;;AAEA,IAAII,MAAMH,QAAQ,IAAR,CAAV;;AAEA,IAAII,OAAOF,uBAAuBC,GAAvB,CAAX;;AAEA,IAAIE,UAAUL,QAAQ,QAAR,CAAd;;AAEA,IAAIM,WAAWJ,uBAAuBG,OAAvB,CAAf;;AAEA,IAAIE,WAAWP,QAAQ,WAAR,CAAf;;AAEA,IAAIQ,YAAYN,uBAAuBK,QAAvB,CAAhB;;AAEA,IAAIE,SAAST,QAAQ,SAAR,CAAb;;AAEA,IAAIU,UAAUR,uBAAuBO,MAAvB,CAAd;;AAEA,SAASP,sBAAT,CAAgCS,GAAhC,EAAqC;AACjC,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AACH;;AAED;;AAEA,IAAIG,YAAY,EAAhB;;AAEA,SAASC,SAAT,CAAmBC,QAAnB,EAA6BC,OAA7B,EAAsC;AAClC,QAAIX,SAASO,OAAT,CAAiBK,QAAjB,CAA0BF,QAA1B,CAAJ,EAAyC;AACrCA,mBAAWf,aAAaY,OAAb,CAAqBM,OAArB,CAA6BH,QAA7B,CAAX;AACH;AACD,WAAOA,SAASC,OAAT,CAAP;AACH;;AAED,SAASG,WAAT,CAAqBC,KAArB,EAA4B;AACxB,WAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,YAAIH,SAASP,SAAb,EAAwB;AACpBW,oBAAQC,GAAR,CAAY,oBAAoBL,KAAhC;AACAE,oBAAQT,UAAUO,KAAV,CAAR;AACH,SAHD,MAGO;AACHI,oBAAQC,GAAR,CAAY,0BAA0BL,KAAtC;AACAX,oBAAQG,OAAR,CAAgBc,SAAhB,CAA0BN,KAA1B,EAAiCO,IAAjC,CAAsC,UAAUC,IAAV,EAAgB;AAClD,oBAAIb,WAAWf,aAAaY,OAAb,CAAqBM,OAArB,CAA6BU,KAAKC,QAAL,EAA7B,CAAf;AACA,oBAAI,CAAChB,UAAUO,KAAV,CAAL,EAAuB;AACnBP,8BAAUO,KAAV,IAAmBL,QAAnB;AACH;AACDO,wBAAQP,QAAR;AACH,aAND;AAOH;AACJ,KAdM,CAAP;AAeH;;AAED,SAASe,GAAT,GAAe;AACX,WAAOjB,SAAP;AACH;;AAEDjB,QAAQgB,OAAR,GAAkB;AACdO,iBAAaA,WADC;AAEdL,eAAWA,SAFG;AAGdgB,SAAKA;AAHS,CAAlB;;AAMAC,OAAOnC,OAAP,GAAiB;AACbuB,iBAAaA,WADA;AAEbL,eAAWA,SAFE;AAGbgB,SAAKA;AAHQ,CAAjB;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"templates.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _handlebars = require('handlebars');\n\nvar _handlebars2 = _interopRequireDefault(_handlebars);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _helpers = require('./helpers');\n\nvar _helpers2 = _interopRequireDefault(_helpers);\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\n// This caches the compiled templates, saves them by filename\n\nvar templates = {};\n\nfunction transform(template, context) {\n    if (_lodash2.default.isString(template)) {\n        template = _handlebars2.default.compile(template);\n    }\n    return template(context);\n}\n\nfunction getTemplate(fname) {\n    return new Promise(function (resolve, reject) {\n        if (fname in templates) {\n            console.log('cache hit with ' + fname);\n            resolve(templates[fname]);\n        } else {\n            console.log('called readfile with ' + fname);\n            _utils2.default.readFileP(fname).then(function (data) {\n                var template = _handlebars2.default.compile(data.toString());\n                if (!templates[fname]) {\n                    templates[fname] = template;\n                }\n                resolve(template);\n            });\n        }\n    });\n}\n\nfunction all() {\n    return templates;\n}\n\nexports.default = {\n    getTemplate: getTemplate,\n    transform: transform,\n    all: all\n};\n\nmodule.exports = {\n    getTemplate: getTemplate,\n    transform: transform,\n    all: all\n};\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map\n//# sourceMappingURL=templates.js.map"]}